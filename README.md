# Админка для управления пользователями

[![OpenAPI](https://github.com/iskorotkov/user-admin-panel-common/actions/workflows/openapi.yml/badge.svg)](https://github.com/iskorotkov/user-admin-panel-common/actions/workflows/openapi.yml)

[![Go](https://github.com/iskorotkov/user-admin-panel-backend/actions/workflows/go.yml/badge.svg)](https://github.com/iskorotkov/user-admin-panel-backend/actions/workflows/go.yml)

[![Node.js CI](https://github.com/iskorotkov/user-admin-panel-frontend/actions/workflows/node.js.yml/badge.svg)](https://github.com/iskorotkov/user-admin-panel-frontend/actions/workflows/node.js.yml)

## Запуск

Сперва необходимо клонировать репозиторий и запустить сервисы:

```shell
git clone https://github.com/iskorotkov/user-admin-panel
cd user-admin-panel/user-admin-panel-common
docker compose up --build
```

Затем необходимо открыть вкладку в браузере с адресом `http://localhost:3000`.

## Задание

Необходимо реализовать Админ-панель для работы с учетными данными пользователей.

Внешний вид приложения должен состоять из сайдбара и области для отображения контента.
Пользовательский интерфейс должен быть адаптивным к PC и Mobile.

При нажатии на элемент списка необходимо отобразить 2 кнопки (редактировать и удалить) в сайдбаре.
По нажатию на кнопку “редактировать” – открыть модальное окно с набором полей (имя, телефон, email, пол).
Сделать валидацию поля email.
Реализовать сохранение отредактированных полей, чтобы при повторном открытии отображались данные, которые были введены ранее.
По нажатию на кнопку “удалить” – удалять элемент списка и данные о пользователе из хранилища данных.

Серверную часть реализовать на Go.
Клиентскую часть реализовать на Typescript.

Плюсом будет:

- Использование любого UI фреймворка (Material, Ant, Bootstrap и т.п.)
- Использование Docker
- Использование PostgreSQL или DynamoDB
- Наличие CICD, сборка и запуск тестов. GitHub actions и т.п.

## Архитектура

Компоненты системы:

- [бэкенд](https://github.com/iskorotkov/user-admin-panel-backend)
- [фронтенд](https://github.com/iskorotkov/user-admin-panel-frontend)
- [общие файлы](https://github.com/iskorotkov/user-admin-panel-common)

## Особенности реализации

- модули системы реализованы как Git submodules (я делал их как отдельные репозитории, но в конце удобнее представлять как один репозиторий, в котором "всё есть")
- используется soft delete (данные в БД только помечаются на удаление, а не удаляются)
- клиент и сервер сгенерированы с OpenAPI спецификации (собственно, поэтому так много файлов - создано много boilerplate при генерации)
  - какие файлы написаны мной:
    - фронтенд: `src/App.tsx`, `components/*`
    - бэкенд: `main.go`, `api/api_users_service.go`, `entities/*`
- соответственно, есть Swagger UI
- есть смена темы (темная/светлая, сохраняется в localStorage и применяется при повторном открытии вкладки, но с т. н. [FART](https://css-tricks.com/flash-of-inaccurate-color-theme-fart/))
- тестов нет (совсем). Но тесты в CI запускаются (логика в бэкенде тривиальна, на фронте писать тесты для ТЗ у меня нет желания). Всё как в ТЗ
- интерфейс на английском (мне нравится английский)
- есть линтеры и форматтеры (`golangci-lint`, ESLint+Prettier)

## Реализованные и нереализованные функции

- [x] сайдбар и область для отображения контента
- [x] UI адаптивен к PC и мобильным устройствам (я видел проблемы на очень маленьком размере экрана, но в рамках ТЗ тратить на это время больше нужного не планирую)
- [x] 4 кнопки вместо двух! (создать + изменить/удалить + смена темы)
- [x] модальное окно для создания/редактирования (причем одно и тоже)
- [x] валидация поля email, а также имени и телефона (причем как на фронте, так и в бэкенде, на всякий случай)
  - по поводу именно такого (простого) способа валидации email можно почитать мой комментарий в бэкенде. Вкратце, валидировать email со всеми возможными символами (в т. ч. emoji) слишком сложно и бесполезно
- [x] при редактировании пользователя в форме изначально показываются его данные
  - "Реализовать сохранение отредактированных полей, чтобы при повторном открытии отображались данные, которые были введены ранее" - непонятная формулировка, но вроде это и имелось в виду
- [x] удаление элемента (soft delete, см. особенности реализации)
- [x] использование UI фреймворка (использую Mantine, т. к. давно хотел попробовать)
- [x] использование Docker + Docker Compose
- [x] использование PostgreSQL
- [x] наличие CI, сборка и запуск тестов в Github Actions (прошу заметить, что про написание тестов никто ничего не говорил, а запускать-то их несложно)
